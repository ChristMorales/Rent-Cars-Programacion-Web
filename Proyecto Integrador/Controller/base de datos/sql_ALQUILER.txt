CREATE DATABASE RentCars;

USE Rentcar;

CREATE TABLE Clientes (
ID_cliente INT PRIMARY KEY AUTO_INCREMENT,
Dni INT NOT NULL,
Nombre VARCHAR(50) NOT NULL,
Apellido VARCHAR(50) NOT NULL,
Fecha_nac DATE NOT NULL,
Email VARCHAR(255) NOT NULL,
Contrasenia VARCHAR(30) NOT NULL
);

CREATE TABLE Locales (
ID_local INT PRIMARY KEY AUTO_INCREMENT,
Nombre_local VARCHAR(255) NOT NULL,
Direccion VARCHAR(255) NOT NULL
);

CREATE TABLE Autos (
ID_auto INT PRIMARY KEY AUTO_INCREMENT,
Patente VARCHAR(10) NOT NULL,
Marca VARCHAR(20) NOT NULL,
Modelo VARCHAR(50) NOT NULL,
Anio VARCHAR(4) NOT NULL,
Alquiler_en_curso INT DEFAULT -1,
Locale INT,
FOREIGN KEY (Locale) REFERENCES Locales (ID_local)
);

CREATE TABLE Alquileres (
Nro_nota INT PRIMARY KEY AUTO_INCREMENT,
Cliente INT,
Auto INT,
Fecha_alquiler DATE NOT NULL,
Fecha_devolucion DATE NOT NULL,
Servicio VARCHAR(255) NOT NULL,
Locale INT,
En_curso BOOLEAN DEFAULT TRUE,
FOREIGN KEY (Cliente) REFERENCES Clientes (ID_cliente),
FOREIGN KEY (Auto) REFERENCES Autos (ID_auto),
FOREIGN KEY (Locale) REFERENCES Locales (ID_local)
);

CREATE TABLE Facturas (
ID_factura INT PRIMARY KEY AUTO_INCREMENT,
Cliente INT,
Fecha_emision DATE NOT NULL,
Total DECIMAL(10,2) NOT NULL,
FOREIGN KEY (Cliente) REFERENCES Clientes (ID_cliente)
);

CREATE TABLE Abonos (
ID_abono INT PRIMARY KEY AUTO_INCREMENT,
Cliente INT,
Fecha_abono DATE NOT NULL,
Monto DECIMAL(10,2) NOT NULL,
FOREIGN KEY (Cliente) REFERENCES Clientes (ID_cliente)
);

CREATE TABLE Reclamos (
ID_reclamo INT PRIMARY KEY AUTO_INCREMENT,
Cliente INT,
Fecha_reclamo DATE NOT NULL,
Descripcion TEXT NOT NULL,
FOREIGN KEY (Cliente) REFERENCES Clientes (ID_cliente)
);

CREATE TABLE Opiniones (
ID_opinion INT PRIMARY KEY AUTO_INCREMENT,
Cliente INT,
Fecha_opinion DATE NOT NULL,
Comentario TEXT NOT NULL,
FOREIGN KEY (Cliente) REFERENCES Clientes (ID_cliente)
);

