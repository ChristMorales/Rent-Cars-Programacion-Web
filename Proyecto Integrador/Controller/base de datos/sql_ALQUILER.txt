CREATE DATABASE AlquilerG4;

USE AlquilerG4;



CREATE TABLE ALQUILER(
  ID_ALQUILER int(11) PRIMARY KEY not null,
  FECHA_ALQ date DEFAULT NULL,
  FECHA_DEVOLUCION date DEFAULT NULL
);

CREATE TABLE AUTOS(
  PATENTE varchar(9) NOT NULL,
  MARCA varchar(20)  NOT NULL,
  MODELO varchar(50)  NOT NULL,
  ANIO varchar(4) NOT NULL
 
);

CREATE TABLE CLIENTES(
  DNI_CLIENTES int(11) NOT NULL,
  NOMBRE varchar(50) NOT NULL,
  APELLIDO varchar(50) NOT NULL,
  FECHA_NACIMIENTO date NOT NULL,
  EMAIL varchar(100) NOT NULL,
  CONTRASEÃ‘A varchar(50) NOT NULL
  CONSTRAINT PK_ID_CLIENTES PRIMARY KEY(DNI_CLIENTES)
);

CREATE TABLE GASTOS_LOCALES(
  NRO_FACTURA INT NOT NULL,
  PROVEEDORES_CUIT int(11) NOT NULL,
  FECHA date NOT NULL,
  MONTO DOUBLE(12,2) NOT NULL,
  MOTIVO varchar(100) NOT NULL
);

CREATE TABLE GASTOS_OPERATIVOS (
  NRO_FACTURA int(11) NOT NULL,
  PROVEEDORES_CUIT int(11) NOT NULL,
  FECHA date NOT NULL,
  MOTIVO varchar(255) NOT NULL,
MONTO DOUBLE(12,2) NOT NULL,
 
);

CREATE TABLE UBICACION (
  DIRECCION varchar(255)  NOT NULL
);
CREATE TABLE SERVICIOS (
  PAQUETE varchar(255)  NOT NULL
);

-----------------------------------------


ALTER TABLE CLIENTES add id_alquiler int not NULL; 
 ALTER table CLIENTES ADD CONSTRAINT FK_Clientes_alquiler
  FOREIGN KEY(id_alquiler) REFERENCES ALQUILER(ID_ALQUILERES);

  



ALTER TABLE ALQUILER ADD ID_AUTOS INT NOT NULL;
ALTER TABLE ALQUILER ADD ID_SERVICIOS INT NOT NULL;
ALTER TABLE ALQUILER ADD CONSTRAINT UK_IDALQUILER UNIQUE(ID_ALQUILER);


ALTER TABLE AUTOS ADD ID_GASTOS_LOCALES INT NOT NULL;

ALTER TABLE AUTOS ADD ID_GASTOS_OPERATIVOS INT NOT NULL;
ALTER TABLE  UBICACION ADD ID_UBICACION VARCHAR NOT NULL;
ALTER TABLE UBICACION ADD CONSTRAINT FK_DOMICIOLIO_AUTO
FOREIGN KEY(ID_UBICACION) REFERENCES AUTOS(PATENTE);



ALTER TABLE UBICACION ADD ALQUILER_UBICACION  VARCHAR NOT NULL;
ALTER TABLE UBICACION ADD CONSTRAINT FK_UBICACION_ALQUILER
FOREIGN KEY(ALQUILER_UBICACION) REFERENCES ALQUILER(ID_ALQUILER)


SELECT * FROM CLIENTE;
INSERT INTO CLIENTE VALUES(
   '168654', 'LAURA', 'PEREZ', '22/45/784', 'LAURA@PEREZ.COM','1564' 
);



